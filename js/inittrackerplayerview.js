"use strict";const STORAGE_SHORT_TOKEN="st";window.addEventListener("load",()=>{ExcludeUtil.pInitialise();const a=new InitiativeTrackerPlayerMessageHandlerPage,b=StorageUtil.syncGetForPage(STORAGE_SHORT_TOKEN),c=$(`#initp__ipt_server_token`).disableSpellcheck(),d=$(`#initp__btn_gen_client_token`),e=$(`#initp__ipt_client_token`).disableSpellcheck(),f=$(`#initp__cb_short`).change(()=>StorageUtil.syncSetForPage(STORAGE_SHORT_TOKEN,f.prop("checked"))).prop("checked",!(null!=b)||b),g=new InitiativeTrackerPlayerUi(a,c,d,e,f);g.init();const h=$(`body`);h.on("keypress",b=>{if("f"===b.key&&noModifierKeys(b)){if(MiscUtil.isInInput(b))return;b.preventDefault(),a.isActive&&h.toggleClass("is-fullscreen")}})});class InitiativeTrackerPlayerMessageHandlerPage extends InitiativeTrackerPlayerMessageHandler{constructor(){super(!1)}initUi(){this._isUiInit||(this._isUiInit=!0,$(`.initp__initial`).remove(),$(`.initp__wrp_active`).show(),this._$meta=$(`.initp__meta`),this._$head=$(`.initp__header`),this._$rows=$(`.initp__rows`),$(window).on("beforeunload",a=>{if(this._clientData.client.isActive){return(a||window.event).message="The connection will be closed","The connection will be closed"}}))}}