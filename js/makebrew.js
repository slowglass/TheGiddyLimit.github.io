"use strict";window.onload=()=>{doPageInit().catch(a=>{throw a})};class PageUi{constructor(){this._builders={},this._$menuInner=null,this._$wrpSource=null,this._$wrpMain=null,this._$wrpInput=null,this._$wrpInputControls=null,this._$wrpOutput=null,this._allSources=[],this._$selSource=null,this.__saveableStates=null,this.doSaveDebounced=MiscUtil.debounce(()=>this._doSave(),50),this._settings={},this._saveSettingsDebounced=MiscUtil.debounce(()=>this._doSaveSettings(),50)}set creatureBuilder(a){this._builders.creatureBuilder=a}set spellBuilder(a){this._builders.spellBuilder=a}get $wrpInput(){return this._$wrpInput}get $wrpInputControls(){return this._$wrpInputControls}get $wrpOutput(){return this._$wrpOutput}get $wrpSideMenu(){return this._$menuInner}get source(){return this._settings.activeSource||""}get allSources(){return this._allSources}set source(a){this._$selSource.val(a),this._settings.activeSource=a,this._doHandleUpdateSource()}_doSave(){this.__saveableStates=this.__saveableStates||{builders:{}},Object.entries(this._builders).forEach(([a,b])=>{(!this.__saveableStates.builders[a]||b.isStateDirty)&&(this.__saveableStates.builders[a]=b.getSaveableState(),b.isStateDirty=!1)}),StorageUtil.pSetForPage(PageUi.STORAGE_STATE,this.__saveableStates)}_doSaveSettings(){StorageUtil.pSetForPage(PageUi.STORAGE_SETTINGS,this._settings)}async init(){this._settings=(await StorageUtil.pGetForPage(PageUi.STORAGE_SETTINGS))||{},this._$wrpLoad=$(`#page_loading`),this._$wrpSource=$(`#page_source`),this._$wrpMain=$(`#page_main`),this._settings.activeBuilder=this._settings.activeBuilder||"creatureBuilder",this._initLhs(),this._initRhs(),this._initSideMenu();const a=(await StorageUtil.pGetForPage(PageUi.STORAGE_STATE))||{};a.builders&&Object.entries(a.builders).forEach(([a,b])=>{this._builders[a]&&this._builders[a].setStateFromLoaded(b)}),this._doRenderActiveBuilder(),this._doInitNavHandler(),this._settings.activeSource&&BrewUtil.homebrewMeta.sources.some(a=>a.json===this._settings.activeSource)?(this.__setStageMain(),this._sideMenuEnabled=!0):(this._doRebuildStageSource({mode:"add",isRequired:!0}),this.__setStageSource())}__setStageSource(){this._$wrpLoad.hide(),this._$wrpSource.show(),this._$wrpMain.hide()}__setStageMain(){this._$wrpLoad.hide(),this._$wrpSource.hide(),this._$wrpMain.show()}_doRebuildStageSource(a){SourceUiUtil.render({...a,$parent:this._$wrpSource,cbConfirm:b=>{const c="edit"!==a.mode;c?BrewUtil.addSource(b):BrewUtil.updateSource(b),this._settings.activeSource=b.json,c&&this._doAddSourceOption(b),this._doHandleUpdateSource(),this._sideMenuEnabled=!0,this.__setStageMain()},cbConfirmExisting:a=>{this._settings.activeSource=a.json,this._doHandleUpdateSource(),this._sideMenuEnabled=!0,this.__setStageMain()},cbCancel:()=>{this._sideMenuEnabled=!0,this.__setStageMain()}})}_initLhs(){this._$wrpInput=$(`#content_input`),this._$wrpInputControls=$(`#content_input_controls`)}_initRhs(){this._$wrpOutput=$(`#content_output`)}_initSideMenu(){const a=$(`.sidemenu`),b=this._settings.activeBuilder,c=$(`<div class="sidemenu__row split-v-center"><div class="sidemenu__row__label mr-2">Mode</div></div>`).appendTo(a),d=$(`
			<select class="form-control input-xs">
				<option value="creatureBuilder">Creature</option>
				<option value="spellBuilder">Spell</option>
			</select>
		`).appendTo(c).change(()=>{this._settings.activeBuilder=d.val();const a=this._builders[this._settings.activeBuilder];a.renderInput(),a.renderOutput(),a.renderSideMenu(),this._saveSettingsDebounced()});a.append(PageUi.__$getSideMenuDivider(!0));const e=$(`<div class="sidemenu__row split-v-center"><div class="sidemenu__row__label mr-2">Source</div></div>`).appendTo(a);this._allSources=(BrewUtil.homebrewMeta.sources||[]).sort((c,a)=>SortUtil.ascSortLower(c.full,a.full)).map(a=>a.json),this._$selSource=$$`
			<select class="form-control input-xs">
				<option disabled>Select</option>
				${this._allSources.map(a=>`<option value="${a.escapeQuotes()}">${Parser.sourceJsonToFull(a).escapeQuotes()}</option>`)}
			</select>`.appendTo(e).change(()=>{this._settings.activeSource=this._$selSource.val(),this._doHandleUpdateSource()}),this._settings.activeSource?this._$selSource.val(this._settings.activeSource):this._$selSource[0].selectedIndex=0;const f=$(`<button class="btn btn-default btn-xs mr-2">Edit Selected Source</button>`).click(()=>{const a=this._settings.activeSource,b=BrewUtil.sourceJsonToSource(a);b&&(this._doRebuildStageSource({mode:"edit",source:MiscUtil.copy(b)}),this.__setStageSource())});$$`<div class="sidemenu__row">${f}</div>`.appendTo(a);const g=$(`<button class="btn btn-default btn-xs">Add New Source</button>`).click(()=>{this._doRebuildStageSource({mode:"add"}),this.__setStageSource()});$$`<div class="sidemenu__row">${g}</div>`.appendTo(a),a.append(PageUi.__$getSideMenuDivider(!0)),this._$menuInner=$(`<div/>`).appendTo(a),b&&d.val(b).change()}set _sideMenuEnabled(a){$(`.sidemenu__toggle`).toggle(!!a)}static __$getSideMenuDivider(a){return $(`<hr class="sidemenu__row__divider ${a?"sidemenu__row__divider--heavy":""}">`)}_doRenderActiveBuilder(){const a=this._builders[this._settings.activeBuilder];a.renderInput(),a.renderOutput()}_doInitNavHandler(){}_doAddSourceOption(a){this._allSources.push(a.json),this._$selSource.append(`<option value="${a.json.escapeQuotes()}">${a.full.escapeQuotes()}</option>`),this._builders[this._settings.activeBuilder].doHandleSourcesAdd()}_doHandleUpdateSource(){this._$selSource&&this._$selSource.val(this._settings.activeSource),this._saveSettingsDebounced(),this._builders[this._settings.activeBuilder].doHandleSourceUpdate()}_getJsonOutputTemplate(){return{_meta:{sources:[MiscUtil.copy(BrewUtil.sourceJsonToSource(this._settings.activeSource))]},dateAdded:Math.round(Date.now()/1e3)}}}PageUi.STORAGE_STATE="brewbuilderState",PageUi.STORAGE_SETTINGS="brewbuilderSettings";class Builder extends ProxyBase{static async pInitAll(){return Promise.all(Builder._BUILDERS.map(a=>a.pInit()))}constructor(a){super(),a=a||{},this._titleSidebarLoadExisting=a.titleSidebarLoadExisting,this._titleSidebarDownloadJson=a.titleSidebarDownloadJson,this._prop=a.prop,Builder._BUILDERS.push(this),TabUiUtil.decorate(this),this._ui=null,this._isStateDirty=!1,this._isEntrySaved=!0,this._sourcesCache=[],this._$selSource=null,this._cbCache=null,this.__state=this._getInitialState(),this._state=null,this.__meta=this.getInitialMetaState(),this._meta=null,this.doCreateProxies(),this._$btnSave=null,this._$sideMenuStageSaved=null,this._$sideMenuWrpList=null,this._$eles={}}doCreateProxies(){this._resetHooks("state"),this._resetHooks("meta"),this._state=this._getProxy("state",this.__state),this._meta=this._getProxy("meta",this.__meta)}set ui(a){this._ui=a}get isStateDirty(){return this._isStateDirty}set isStateDirty(a){this._isStateDirty=a}get isEntrySaved(){return this._isEntrySaved}set isEntrySaved(a){this._isEntrySaved=a}getSaveableState(){return{s:this.__state,m:this.__meta,_m:{isEntrySaved:this.isEntrySaved}}}setStateFromLoaded(){throw new TypeError(`Unimplemented method!`)}doHandleSourceUpdate(){const a=this._ui.source;if(!this._sourcesCache.includes(a)){this._state.source=a,this._sourcesCache=MiscUtil.copy(this._ui.allSources);const b=this._$selSource;this._$selSource=this.$getSourceInput(this._cbCache),b.replaceWith(this._$selSource)}this.renderInput(),this.renderOutput(),this.renderSideMenu(),this.doUiSave()}$getSourceInput(a){return BuilderUi.$getStateIptEnum("Source",a,this._state,{vals:this._sourcesCache,fnDisplay:Parser.sourceJsonToFull,type:"string",nullable:!1},"source")}doUiSave(){this._isStateDirty=!0,this._ui.doSaveDebounced()}renderSideMenu(){this._ui.$wrpSideMenu.empty();const a=$(`<button class="btn btn-xs btn-default">${this._titleSidebarLoadExisting}</button>`).click(()=>this.handleSidebarLoadExistingClick());$$`<div class="sidemenu__row">${a}</div>`.appendTo(this._ui.$wrpSideMenu);const b=$(`<button class="btn btn-default btn-xs mb-2">${this._titleSidebarDownloadJson}</button>`).click(()=>this.handleSidebarDownloadJsonClick());this._$sideMenuWrpList=$(`<div class="sidemenu__row flex-col">`),this._$sideMenuStageSaved=$$`<div>
		${PageUi.__$getSideMenuDivider().hide()}
		<div class="flex-v-center">${b}</div>
		${this._$sideMenuWrpList}
		</div>`.appendTo(this._ui.$wrpSideMenu),this.doUpdateSidemenu()}get ixBrew(){return this._meta.ixBrew}set ixBrew(a){this._meta.ixBrew=a}getOnNavMessage(){return!this.isEntrySaved&&~this.ixBrew?"You have unsaved changes! Are you sure you want to leave?":null}getSideMenuItems(){return MiscUtil.copy((BrewUtil.homebrew[this._prop]||[]).filter(a=>a.source===this._ui.source)).sort((c,a)=>SortUtil.ascSort(c.name,a.name))}doUpdateSidemenu(){this._$sideMenuWrpList.empty();const a=this.getSideMenuItems();this._$sideMenuStageSaved.toggle(!!a.length),a.forEach(a=>{const b=BrewUtil.getEntryIxByName(this._prop,a),c=$(`<button class="btn btn-xs btn-default mr-2" title="Edit"><span class="glyphicon glyphicon-pencil"/></button>`).click(()=>{this.getOnNavMessage()&&!confirm("You have unsaved changes. Are you sure?")||(this.setStateFromLoaded({s:MiscUtil.copy(a),m:{...this.getInitialMetaState(),ixBrew:b}}),this.renderInput(),this.renderOutput(),this.doUiSave())}),d=ContextUtil.getNextGenericMenuId(),e=[{name:"Duplicate",action:async()=>{const b=MiscUtil.copy(a),c=/^(.*?) \((\d+)\)$/.exec(a.name.trim());b.name=c?`${c[1]} (${+c[2]+1})`:`${b.name} (1)`,await BrewUtil.pAddEntry(this._prop,b),this.doUpdateSidemenu()}},{name:"View JSON",action:b=>{const c=this._ui._getJsonOutputTemplate();c[this._prop]=[PropOrder.getOrdered(DataUtil.cleanJson(MiscUtil.copy(a)),this._prop)];const d=Renderer.hover.__initOnMouseHoverEntry({type:"code",name:`${this._state.name} \u2014 Source Data`,preformatted:JSON.stringify(c,null,"\t")});f.attr("data-hover-active",!1),Renderer.hover.mouseOverHoverTooltip({shiftKey:!0,clientX:b.clientX},f[0],d,!0)}},{name:"Download JSON",action:()=>{const b=this._ui._getJsonOutputTemplate();b[this._prop]=[DataUtil.cleanJson(MiscUtil.copy(a))],DataUtil.userDownload(DataUtil.getCleanFilename(a.name),b)}}];ContextUtil.doInitContextMenu(d,(a,b,c,d)=>{const f=+d.data("ctx-id");e[f].action(a,c)},e.map(a=>a.name));const f=$(`<button class="btn btn-xs btn-default mr-2" title="More Options"><span class="glyphicon glyphicon-option-vertical"/></button>`).click(a=>ContextUtil.handleOpenContextMenu(a,f,d)),g=$(`<button class="btn btn-xs btn-danger" title="Delete"><span class="glyphicon glyphicon-trash"/></button>`).click(async()=>{confirm("Are you sure?")&&(this.ixBrew===b?(this.isEntrySaved=!1,this.ixBrew=null,this.mutSavedButtonText()):this.ixBrew>b&&this.ixBrew--,await BrewUtil.pRemoveEntry(this._prop,a),this.doUpdateSidemenu())});$$`<div class="mkbru__sidebar-entry flex-v-center split px-2">
			<span class="py-1">${a.name}</span>
			<div class="py-1 no-shrink">${c}${f}${g}</div>
			</div>`.appendTo(this._$sideMenuWrpList)})}handleSidebarDownloadJsonClick(){const a=this._ui._getJsonOutputTemplate();a[this._prop]=(BrewUtil.homebrew[this._prop]||[]).filter(a=>a.source===this._ui.source).map(a=>PropOrder.getOrdered(DataUtil.cleanJson(MiscUtil.copy(a)),this._prop)),DataUtil.userDownload(DataUtil.getCleanFilename(BrewUtil.sourceJsonToFull(this._ui.source)),a)}renderInputControls(){const a=this._ui.$wrpInputControls.empty();this._$btnSave=BuilderUi.$getSaveButton().click(async()=>{await this._renderInputControls_pSaveBrew(),this.doUpdateSidemenu()}).appendTo(a),BuilderUi.$getResetButton().click(()=>{confirm("Are you sure?")&&(this.setStateFromLoaded({s:this._getInitialState(),m:this.getInitialMetaState()}),this.renderInput(),this.renderOutput(),this.isEntrySaved=!0,this.mutSavedButtonText(),this.doUiSave())}).appendTo(a)}async _renderInputControls_pSaveBrew(){if(null!=this.ixBrew)await BrewUtil.pUpdateEntryByIx(this._prop,this.ixBrew,MiscUtil.copy(this.__state)),this.renderSideMenu();else{const a=MiscUtil.copy(this.__state);this.ixBrew=await BrewUtil.pAddEntry(this._prop,a),await Omnisearch.pAddToIndex(this._prop,a),await SearchWidget.P_LOADING_CONTENT,SearchWidget.addToIndexes(this._prop,a)}this.isEntrySaved=!0,this.mutSavedButtonText(),this.doUiSave()}mutSavedButtonText(){this._$btnSave&&this._$btnSave.text(this.isEntrySaved?"Saved":"Save *")}static $getBtnRemoveRow(a,b,c,d,e,f){return f=f||{},$(`<button class="btn ${f.isExtraSmall?"btn-xxs":"btn-xs"} btn-danger ${f.isProtectLast?"mkbru__btn-rm-row":""}" title="Remove ${e}"><span class="glyphicon glyphicon-trash"/></button>`).click(()=>{b.splice(b.indexOf(c),1),d.empty().remove(),a()})}doHandleSourcesAdd(){throw new TypeError(`Unimplemented method!`)}renderInput(){throw new TypeError(`Unimplemented method!`)}renderOutput(){throw new TypeError(`Unimplemented method!`)}handleSidebarLoadExistingClick(){throw new TypeError(`Unimplemented method!`)}getInitialMetaState(){return{}}async pInit(){}}Builder._BUILDERS=[];class BuilderUi{static $getSaveButton(){return $(`<button class="btn btn-xs btn-default mr-2 mkbru__cnt-save">Save</button>`)}static $getResetButton(){return $(`<button class="btn btn-xs btn-default">Reset</button>`)}static __setProp(a,b,c,...d){if(1<d.length){let b=c;for(let a=0;a<d.length-1;++a)b=c[d[a]];return null==a?(delete b[d.last()],null):b[d.last()]=a}return null==a?(delete c[d[0]],null):c[d[0]]=a}static getLabelledRowTuple(a,b){b=b||{};const c=b.eleType||"div",d=$(`<div class="${b.isRow?"flex":"flex-col"} w-100"/>`),e=$$`<div class="mb-2 mkbru__row stripe-even"><${c} class="mkbru__wrp-row flex-v-center"><span class="mr-2 mkbru__row-name ${b.isMarked?`mkbru__row-name--marked`:""} ${b.title?"help":""}" ${b.title?`title="${b.title}"`:""}>${a}</span>${b.isMarked?`<div class="mkbru__row-mark mr-2"/>`:""}${d}</${c}></div>`;return[e,d]}static __$getRow(a,b,c){c=c||{};const d=c.eleType||"div";return $$`<div class="mb-2 mkbru__row stripe-even"><${d} class="mkbru__wrp-row flex-v-center">
		<span class="mr-2 mkbru__row-name ${c.title?"help":""}" ${c.title?`title="${c.title}"`:""}>${a}</span>
		${b}
		<${d}/></div>`}static $getStateIptString(a,b,c,d,...e){null==d.nullable&&(d.nullable=!0);const f=MiscUtil.get(c,...e),g=$(`<input class="form-control input-xs form-control--minimal ${d.type?`type="${d.type}"`:""}">`).val(f).change(()=>{const a=g.val().trim(),f=BuilderUi.__setProp(a||!d.nullable?a:null,d,c,...e);b(),d.callback&&d.callback(f)});return BuilderUi.__$getRow(a,g,d)}static $getStateIptEntries(a,b,c,d,...e){null==d.nullable&&(d.nullable=!0);let f=MiscUtil.get(c,...e);d.withHeader&&f&&(f=f[0].entries);const g=$(`<textarea class="form-control form-control--minimal resize-vertical" ${d.placeholder?`placeholder="${d.placeholder}"`:""}/>`).val(UiUtil.getEntriesAsText(f)).change(()=>{const a=g.val().trim();let f=a||!d.nullable?UiUtil.getTextAsEntries(a):null;d.withHeader&&(f=[{name:d.withHeader,entries:f}]),BuilderUi.__setProp(f,d,c,...e),b()});return BuilderUi.__$getRow(a,g,d)}static $getStateIptStringArray(a,b,c,d,...e){null==d.nullable&&(d.nullable=!0);const[f,g]=BuilderUi.getLabelledRowTuple(a,{isMarked:!0}),h=MiscUtil.get(c,...e)||[],i=[],j=()=>{const a=i.map(a=>a.getState()).filter(a=>a.trim());BuilderUi.__setProp(a.length||!d.nullable?a:null,d,c,...e),b()},k=$(`<div/>`).appendTo(g);h.forEach(a=>BuilderUi._$getStateIptStringArray_getRow(j,i,a).$wrp.appendTo(k));const l=$(`<div/>`).appendTo(g);return $(`<button class="btn btn-xs btn-default">Add ${d.shortName}</button>`).appendTo(l).click(()=>{BuilderUi._$getStateIptStringArray_getRow(j,i).$wrp.appendTo(k),j()}),f}static _$getStateIptStringArray_getRow(a,b,c){const d=$(`<input class="form-control form-control--minimal input-xs mr-2">`).change(()=>a());c&&c.trim()&&d.val(c);const e=$(`<button class="btn btn-xs btn-danger" title="Remove Row"><span class="glyphicon glyphicon-trash"/></button>`).click(()=>{b.splice(b.indexOf(g),1),f.empty().remove(),a()}),f=$$`<div class="flex-v-center mb-2">${d}${e}</div>`,g={$wrp:f,getState:()=>d.val().trim()};return b.push(g),g}static $getStateIptNumber(a,b,c,d,...e){null==d.nullable&&(d.nullable=!0);const f=MiscUtil.get(c,...e),g=$(`<input class="form-control input-xs form-control--minimal" type="number" ${d.placeholder?`placeholder="${d.placeholder}"`:""}>`).val(f).change(()=>{const a=g.val().trim();BuilderUi.__setProp(a||!d.nullable?+a:null,d,c,...e),b()});return BuilderUi.__$getRow(a,g,d)}static $getStateIptEnum(a,b,c,d,...e){null==d.nullable&&(d.nullable=!0);const f=MiscUtil.get(c,...e),g=$(`<select class="form-control input-xs form-control--minimal">`);d.nullable&&g.append(`<option value="-1">(None)</option>`),d.vals.forEach((a,b)=>$(`<option>`).val(b).text(d.fnDisplay?d.fnDisplay(a):a).appendTo(g));const h=d.vals.indexOf(f);return g.val(h).change(()=>{const a=+g.val(),f=~a?d.vals[a]:null;BuilderUi.__setProp(f,d,c,...e),b()}),BuilderUi.__$getRow(a,g,d)}static $getStateIptBoolean(a,b,c,d,...e){null==d.nullable&&(d.nullable=!0);const f=MiscUtil.get(c,...e),g=$(`<input class="mkbru__ipt-cb" type="checkbox">`).prop("checked",f).change(()=>{const a=!!g.prop("checked");BuilderUi.__setProp(a||!d.nullable?a:null,d,c,...e),b()});return BuilderUi.__$getRow(a,$$`<div class="w-100 flex-v-center">${g}</div>`,{...d,eleType:"label"})}static $getStateIptBooleanArray(a,b,c,d,...e){null==d.nullable&&(d.nullable=!0);const[f,g]=BuilderUi.getLabelledRowTuple(a,{isMarked:!0}),h=MiscUtil.get(c,...e)||[],i=$(`<div class="flex-col w-100 mr-2"/>`).appendTo(g),j=[];d.vals.forEach(a=>{const f=$(`<input class="mkbru__ipt-cb" type="checkbox">`).prop("checked",h.includes(a)).change(()=>{BuilderUi.__setProp(k(),d,c,...e),b()});j.push({$ipt:f,val:a}),$$`<label class="flex-v-center split stripe-odd--faint"><span>${d.fnDisplay?d.fnDisplay(a):a}</span>${f}</label>`.appendTo(i)});const k=()=>{const a=j.map(a=>!!a.$ipt.prop("checked")&&a.val).filter(Boolean);return a.length||!d.nullable?a:null};return f}static $getSplitCommasSortButton(a,b,c){return c=c||{},$(`<button class="btn btn-xs btn-default">Sort</button>`).click(()=>{const d=a.val().split(StrUtil.COMMAS_NOT_IN_PARENTHESES_REGEX);a.val(d.sort((d,a)=>{if(c.bottom){const b=c.bottom.findIndex(a=>{const b=a.test(d);return a.lastIndex=0,b}),e=c.bottom.findIndex(b=>{const c=b.test(a);return b.lastIndex=0,c});return~b&&~e?0:~b?1:~e?-1:SortUtil.ascSortLower(d,a)}return SortUtil.ascSortLower(d,a)}).join(", ")),b()})}static $getUpButton(a,b,c){return $(`<button class="btn btn-xs btn-default mkbru__btn-up-row ml-2" title="Move Up"><span class="glyphicon glyphicon-arrow-up"/></button>`).click(()=>{const d=b.indexOf(c),e=b[d-1];b[d-1]=c,b[d]=e,a()})}static $getDownButton(a,b,c){return $(`<button class="btn btn-xs btn-default mkbru__btn-down-row ml-2" title="Move Down"><span class="glyphicon glyphicon-arrow-down"/></button>`).click(()=>{const d=b.indexOf(c),e=b[d+1];b[d+1]=c,b[d]=e,a()})}static $getDragPad(a,b,c,d){const e={},f=()=>{e.on=!1,e.$wrap.remove(),e.$dummies.forEach(a=>a.remove())},g=()=>{e.on&&f(),e.on=!0,e.$wrap=$(`<div class="flex-col ui-drag__wrp-drag-block"/>`).appendTo(d.$wrpRowsOuter),e.$dummies=[];const h=b.indexOf(c);b.forEach((j,k)=>{const i={w:j.$ele.outerWidth(!0),h:j.$ele.outerHeight(!0)},l=$(`<div class="${k===h?"ui-drag__wrp-drag-dummy--highlight":"ui-drag__wrp-drag-dummy--lowlight"}"/>`).width(i.w).height(i.h).mouseup(()=>{e.on&&f()}).appendTo(e.$wrap);e.$dummies.push(l),k!==h&&l.mouseenter(()=>{const e=b[k];b[k]=c,b[h]=e,d.cbSwap&&d.cbSwap(e),a(),g()})})};return $(`<div class="ml-2 ui-drag__patch" title="Drag to Reorder">
		<div class="ui-drag__patch-col"><div>&#8729</div><div>&#8729</div><div>&#8729</div></div>
		<div class="ui-drag__patch-col"><div>&#8729</div><div>&#8729</div><div>&#8729</div></div>
		</div>`).mousedown(()=>g())}}async function doPageInit(){ExcludeUtil.pInitialise();try{await BrewUtil.pAddBrewData(),await BrewUtil.pAddLocalBrewData()}catch(a){await BrewUtil.pPurgeBrew(a)}return await SearchUiUtil.pDoGlobalInit(),SearchWidget.pDoGlobalInit(),await Builder.pInitAll(),Renderer.utils.bindPronounceButtons(),ui.init()}const ui=new PageUi;