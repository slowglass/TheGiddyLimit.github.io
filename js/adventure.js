"use strict";const CONTENTS_URL="data/adventures.json";window.onload=function(){BookUtil.renderArea=$(`#pagecontent`),BookUtil.renderArea.append(Renderer.utils.getBorderTr()),BookUtil.renderArea.append(`<tr><td colspan="6" class="initial-message book-loading-message">Loading...</td></tr>`),BookUtil.renderArea.append(Renderer.utils.getBorderTr()),ExcludeUtil.pInitialise(),Omnisearch.addScrollTopFloat(),DataUtil.loadJSON(CONTENTS_URL).then(onJsonLoad)};let list,adventures=[],adI=0;function onJsonLoad(a){$("ul.contents").append($(`<li><a href='adventures.html'><span class='name'>\u21FD All Adventures</span></a></li>`)),list=new List("listcontainer",{valueNames:["name"],listClass:"contents"}),BookUtil.baseDataUrl="data/adventure/adventure-",BookUtil.homebrewIndex="adventure",BookUtil.homebrewData="adventureData",BookUtil.initLinkGrabbers(),BookUtil.contentType="adventure",addAdventures(a),$(`.book-head-message`).text(`Select an adventure from the list on the left`),$(`.book-loading-message`).text(`Select a book to begin`),window.onhashchange=BookUtil.booksHashChange,BrewUtil.pAddBrewData().then(handleBrew).then(()=>BrewUtil.pAddLocalBrewData()).catch(BrewUtil.pPurgeBrew).then(()=>{window.location.hash.length?BookUtil.booksHashChange():$(`.contents-item`).show()})}function handleBrew(a){return addAdventures(a),BookUtil.addHeaderHandles(!0),Promise.resolve()}function addAdventures(a){if(!a.adventure||!a.adventure.length)return;adventures=adventures.concat(a.adventure),BookUtil.bookIndex=adventures;const b=$("ul.contents");let c="";for(;adI<adventures.length;adI++){const a=adventures[adI];c+=BookUtil.getContentsItem(adI,a,{book:a,addOnclick:!0,defaultHeadersHidden:!0})}b.append(c)}